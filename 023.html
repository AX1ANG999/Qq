<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>æˆ‘çš„è½‰ç³»ç‰©èª</title>
    <style>
        @font-face {
            font-family: 'Unifont JP';
            src: url('unifont_jp-16.0.02.otf') format('opentype');
        }
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
            font-family: 'Unifont JP', sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #title {
            position: absolute;
            top: 20vh;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Unifont JP', sans-serif;
            font-size: 10vh;
            color: #5B5B00;
            cursor: pointer;
        }
        .particle {
            position: absolute;
            background-color: #808080;
            opacity: 0.8;
            animation: scatter 1.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @keyframes scatter {
            0% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(100px) translateX(150px); }
        }
        .smoke {
            position: absolute;
            background-color: #808080;
            opacity: 0.5;
            border-radius: 50%;
            animation: smokeRise 1.5s ease-out forwards;
        }
        @keyframes smokeRise {
            0% { opacity: 0.5; }
            100% { opacity: 0; transform: translateY(-75px) scale(2); }
        }
        #dialogueBox {
            position: absolute;
            bottom: 5vh;
            left: 50%;
            transform: translateX(-50%);
            width: 90vw;
            max-width: 600px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            border: 4px solid #5B5B00;
            box-shadow: 0 0 0 2px #000;
            display: none;
            font-family: 'Unifont JP', sans-serif;
            font-size: 24px;
            min-height: 150px;
            max-height: 150px;
            white-space: pre-wrap;
            overflow: auto;
        }
        #dialogueText {
            color: #5B5B00;
            margin: 0 0 10px 0;
            text-align: left;
        }
        .button-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }
        #continueBtn, #replayBtn, #nextChapterBtn, #backToTitleBtn {
            padding: 8px 16px;
            margin: 5px;
            background-color: #5B5B00;
            color: white;
            border: none;
            cursor: pointer;
            font-family: 'Unifont JP', sans-serif;
            font-size: 20px;
            display: inline-block;
        }
        #continueBtn, #replayBtn, #nextChapterBtn, #backToTitleBtn { display: none; }
        #character {
            position: absolute;
            top: 25vh;
            left: 50%;
            transform: translateX(-50%);
            width: 50vh;
            height: 50vh;
            background-size: cover;
            display: none;
        }
    </style>
</head>
<body>
    <div id="title">æˆ‘çš„è½‰ç³»ç‰©èª</div>
    <div id="dialogueBox">
        <p id="dialogueText"></p>
        <div class="button-container">
            <button id="continueBtn" onclick="nextDialogue()">ç¹¼çºŒ</button>
            <button id="replayBtn" onclick="replayChapter()">å†çœ‹ä¸€æ¬¡</button>
            <button id="nextChapterBtn" onclick="nextChapter()">æœªä¾†å±•æœ›</button>
            <button id="backToTitleBtn" onclick="backToTitle()">å›åˆ°æ¨™é¡Œ</button>
        </div>
    </div>
    <div id="character"></div>
    <audio id="typeSound" src="blip.wav"></audio>
    <audio id="dropProcessSound" src="boom_sine_tenor.mp3"></audio>
    <audio id="dropSound" src="435695__samsterbirdies__big-boom.OGG"></audio>
    <audio id="buttonSound" src="https://www.myinstants.com/media/sounds/beep.mp3"></audio>
    <audio id="bgm" src="Hopes And Dreams.mp3" loop></audio>

    <script>
        const chapters = {
            intro: [
                "æˆ‘æ˜¯é»ƒé–ç¿”ï¼Œè‚„æ¥­æ–¼æ¾å±±å·¥è¾²åŒ–å·¥ç§‘ï¼Œç¾åœ¨æ˜¯åŒ–æç³»å¤§ä¸€çš„å­¸ç”Ÿã€‚",
                "æˆ‘å¾å°å°±å¾ˆæœ‰æ„è­˜çš„æ´»è‘—ï¼Œé«˜ä¸­è‚„æ¥­æ˜¯å› ç‚ºæˆ‘è¦ºå¾—å­¸æ ¡çš„å­¸ç¿’æ•ˆç‡ä¸é«˜ï¼Œç•¶æ™‚å°±åœ¨åŠå·¥åŠè®€ä¸‹å¿™ç¢Œçš„çµæŸé«˜ä¸­ç”Ÿæ´»ã€‚",
                "æˆ‘çš„å®¶åº­çµ„æˆæ˜¯ç”±æˆ‘ã€å¤§ä¸€æ­²çš„å§å§ã€åª½åª½æ‰€çµ„æˆï¼Œå®¶åº­çš„ç¶“æ¿Ÿç‹€æ³ä¸ç®—å¤ªå¥åº·ã€‚ä½†å®¶åº­çš„æ°£æ°›æ˜¯å¾ˆä¸éŒ¯çš„ï¼Œå®¶äººå€‘ä¹Ÿæ”¯æŒæˆ‘å¥½å¥½å”¸æ›¸ã€‚",
                "æˆ‘çš„èˆˆè¶£æ˜¯åˆ†æä¸–ç•Œé‚„æœ‰ç©åŠç‰ã€‚",
                "å…·é«”ä¾†èªªï¼Œæˆ‘å¾ˆå¸¸å°ã€æŸå€‹å•é¡Œã€æœ‰æ­¢ä¸ä½çš„å¥½å¥‡å¿ƒã€‚",
                "é€™å€‹å•é¡Œå‡ºç¾çš„å¾ˆéš¨æ©Ÿï¼Œé ˜åŸŸå¯èƒ½æ˜¯ç¶“æ¿Ÿã€æ­·å²ã€éŸ³æ¨‚ã€å“²å­¸ã€‚",
                "èˆ‰å€‹ä¾‹å­ï¼Œæˆ‘èªç‚ºã€æ„šè ¢çš„å‘½ä»¤ã€çš„æœ¬è³ªæ˜¯å¾ˆå¤šäººçš„ç¶œåˆæ„è¦‹å°è‡´ç”Ÿä¸‹ä¸€å€‹ç•¸å½¢çš„æ±ºç­–ï¼Œç„¶å¾Œå»¶ä¼¸å‡ºäº†ã€ç ”ç©¶äºŒæˆ°æ™‚çš„å¾·åœ‹ã€çš„æƒ³æ³•ã€‚å¾å¾·åœ‹èˆ‰è¾¦å¥§é‹æ´—åˆ·ä¸€æˆ°çš„æ¥è¾±ï¼Œä¸€å€‹æœˆå¾Œä¸€æˆ°é–‹æ‰“ï¼Œè®Šç•°åˆ°å°çŒ¶å¤ªäººå¤§å± æ®ºï¼Œæˆ‘å¾ˆå¥½å¥‡é€™éç¨‹æ˜¯æ€éº¼ç™¼å±•çš„ã€‚",
                "æˆ‘é‚„æœ‰ç ”ç©¶è™›æ“¬è²¨å¹£çš„èˆˆè¶£ï¼Œå¾2024å¹´5æœˆè€ƒå®Œçµ±æ¸¬å»ç•¶ä¿å…¨é–‹å§‹çš„ï¼Œæœ¬ä¾†åªæ˜¯æƒ³ç™¼æ©«è²¡ï¼Œä½†æ„å¤–åŸ¹é¤Šå‡ºä¸–ç•Œç¶“æ¿Ÿè§€ï¼Œä¹Ÿæ˜¯æ¨å‹•æˆ‘æ±ºå®šè½‰ç³»çš„åŸå› ä¹‹ä¸€ã€‚",
                "å‰é¢æœ‰æåˆ°ã€æœ‰æ„è­˜çš„æ´»è‘—ã€ä¹Ÿèƒ½èªªæ˜¯ã€å°è‡ªèº«ç†è§£é€å¾¹ã€æˆ‘é«˜ä¸­æ™‚å¾ç¶²è·¯æ¥è§¸å“²å­¸è‡³ä»Šï¼Œè®€äº†ä¸å°‘ç›¸é—œè³‡æ–™ï¼Œä¹Ÿè·Ÿè‡ªå·±è¨è«–äº†è¨±å¤šå¤§å“‰å•ï¼Œå°è‡ªå·±çš„é‚è¼¯éå¸¸æœ‰è‡ªä¿¡ã€‚é †å¸¶ä¸€æï¼Œæœ€è¿‘åœ¨çœ‹çš„æ›¸æ˜¯ã€æœ‰é™éŠæˆ²èˆ‡ç„¡é™éŠæˆ²ã€ã€‚",
                "æˆ‘æœ€å–œæ­¡çš„èˆˆè¶£æ˜¯è½æ­Œï¼Œå–œæ­¡åˆ°è²·äº†DJç›¤è‡ªå·±ç·´ç¿’è‡ªå·±æ”¾æ­Œè·Ÿå­¸è‘—åšéŸ³æ¨‚ã€‚åŸºæœ¬ä¸Šæ‰€æœ‰æ›²é¢¨æˆ‘éƒ½èƒ½èªªå‡ºæˆ‘æœ€å–œæ­¡çš„æŸä¸€é¦–æ­Œï¼Œå¤å…¸æˆ–å˜»å“ˆæˆ–å°çœ¾é›»å­çš„éŸ³æ¨‚éƒ½æœ‰æ¶‰ç•¥ã€‚",
                "æˆ‘æœƒèªªæˆ‘å¾ˆä¸å®¹æ˜“ï¼Œå®¶å¢ƒè²§å¯’å¯ä»¥è®“æˆ‘æ”¾æ£„å­¸æ¥­ï¼Œä¹Ÿèƒ½è®“æˆ‘æ²’æœ‰å¤¢æƒ³ï¼Œä½†æˆ‘æƒ³é€éè‡ªå·±çš„è…¦å­æŠŠå®¶è£¡çš„ã€ç™Œç—‡ï¼ˆè²§çª®ï¼‰ã€æ²»å¥½ï¼Œåª½åª½çš„æ•™è‚²ç¨‹åº¦åªæœ‰é«˜ä¸­ã€å§å§åœ‹ä¸­çµæ¥­ã€‚æˆ‘çš„åƒ¹å€¼è§€ã€ç¤¾æœƒç¶“é©—ã€èˆˆè¶£ï¼Œå¤§éƒ¨åˆ†æ˜¯é€éè‡ªå·±å»æ‘¸ç´¢ã€åŸ¹é¤Šå‡ºä¾†çš„ã€‚æˆ‘ä¹Ÿèªªä¸æ¸…æ¥šç‚ºä»€éº¼ï¼Œè«åçš„å¾ˆè²ªå¿ƒï¼Œæƒ³çŸ¥é“å¾ˆå¤šäº‹ã€‚"
            ],
            motivation: [
                "2025ä¸€æœˆï¼Œæˆ‘åœ¨ç¶²è·¯ä¸Šåˆ†äº«è‡ªå·±all passçš„æˆç¸¾æˆªåœ–ï¼Œæœ‰ä½ç©åŠç‰çš„å‰è¼©æœ‰è¿½è¹¤æˆ‘ï¼ŒçŸ¥é“æˆ‘å”¸åŒ–å­¸å¾Œçš„ç¬¬ä¸€å¥è©±å°±æ˜¯ã€æˆ‘å‹¸ä½ è½‰è³‡é›»é¡ã€ã€‚",
                "é€™ä½å‰è¼©ä»Šå¹´28æ­²ï¼Œæ¸…è¯å¤§å­¸ç¢©ç•¢ï¼Œç¾åœ¨ä»»è·æ–¼ç¾å…‰ã€‚é€™ä½å‰è¼©è·Ÿæˆ‘åˆ†äº«ä»–å¤§å­¸ã€ç¢©å£«ä¸€è·¯å”¸åŒ–å­¸åˆ°å‡ºç¤¾æœƒï¼Œä»–åŒå„•å€‘çš„ç™¼å±•ã€å¾…é‡ã€‚åœ¨ç¶²è·¯ä¸ŠèŠäº†ä¸€å€‹æ™šä¸Šï¼Œæˆ‘æ„Ÿè¦ºã€åŒ–æä¸æ˜¯æˆ‘æƒ³èµ°çš„è·¯ã€ï¼Œå°±ç¨®ä¸‹äº†æˆ‘æƒ³è½‰ç³»çš„ç¨®å­ã€‚",
                "æŒçºŒ2å€‹æœˆçš„æƒ…å ±æœé›†ï¼Œæ±ºå®šå¥½ä¹‹å‰æœ€è‹¦æƒ±çš„å°±æ˜¯ã€å¥½æƒ³è¦ç²¾é€šé€™å››å€‹é ˜åŸŸçš„äººå‘Šè¨´æˆ‘è©²æ€éº¼åšã€ã€‚åœ¨è³‡å·¥ã€è³‡ç®¡ã€å¤§é›»ã€å°é›»ä¹‹é–“çŒ¶è±«ï¼Œã€é‚„æ˜¯åˆ¥è½‰ç³»äº†å…ˆä¹–ä¹–å”¸ã€æ…¢æ…¢æƒ³ã€çš„æƒ³æ³•ä¹Ÿä¸€ç›´å‡ºç¾ã€‚ç²å¾—çš„è³‡è¨Šè¶Šå¤šï¼Œè¶Šæä¸æ‡‚å“ªæ¢è·¯æ‰æ˜¯æˆ‘æƒ³è¦çš„ã€‚",
                "åœ¨ä»Šå¹´ä¸‰æœˆï¼Œæˆ‘æ‰“çµ¦æŠŠæˆ‘æ•™ä¸Šé›²ç§‘çš„æ©å¸«ï¼Œä»–æ˜¯æ•™åŒ–å·¥çš„è£œç¿’ç­è€å¸«ï¼Œæˆ‘éƒ½å«ä»–ç¾©çˆ¶æˆ–çˆ¸ï¼ˆå–®æ–¹é¢ï¼‰ã€‚æˆ‘æ˜¯å¾ˆå€”å¼·çš„å°é¬¼ï¼Œä½†æˆ‘å¾ˆå°Šé‡é€™å€‹äººï¼Œä¸æ­¢æ•™å­¸çš„èƒ½åŠ›ï¼Œåƒ¹å€¼è§€ã€åšäººè™•äº‹ä¹Ÿæ˜¯ã€‚",
                "ã€å¯ä»¥ï¼Œæˆ‘æ”¯æŒã€è½åˆ°é€™å¥å¼·å¿ƒé‡æˆ‘å°±ç¢ºå®šäº†ï¼Œç…©æƒ±2å€‹æœˆçš„å¤§çŸ³é ­çµ‚æ–¼æ”¾ä¸‹ï¼Œéš¨æ”¯æŒè€Œä¾†çš„æ˜¯æ•¸ä¸æ¸…çš„å®åš€å’Œæ³¨æ„äº‹é …ï¼Œä½†æˆ‘æ¸…æ¥šæˆ‘è¢«å£“åŠ›é€¼æ€¥æœƒæœ‰æ€æ¨£çš„å­¸ç¿’èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘å°é€™å€‹å¾ˆæœ‰æŠŠæ¡ã€‚",
                "å°±é€™æ¨£ï¼Œå¾ä¸€æœˆåˆ°ä¸‰æœˆçš„è‹¦æ€å†¥æƒ³çµ‚æ–¼å‘Šä¸€å€‹æ®µè½ã€‚"
            ],
            future: [
                "æŠŠé¡é ­æ‹‰é ã€‚é»ƒé–ç¿”ç¾åœ¨ç«™åœ¨2025å¹´4æœˆçš„æ™‚é–“é»ï¼Œå‰›å‰›æ±ºå®šè¦è½‰ç³»ï¼Œå¿ƒè£¡æœ‰é»åƒç«™åœ¨ä¸€å€‹æ–°éŠæˆ²çš„èµ·é»ï¼ŒæŒ‰ä¸‹é–‹å§‹éµçš„é‚£ä¸€åˆ»ã€‚",
                "æœªä¾†å°æˆ‘ä¾†èªªæ˜¯ä»€éº¼ï¼Ÿè€å¯¦èªªï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“å…·é«”é•·ä»€éº¼æ¨£å­ã€‚æƒ³çŸ¥é“å¾ˆå¤šäº‹ï¼Œä½†ä¹Ÿæ˜ç™½ä¸å¯èƒ½ä¸€æ¬¡æŠŠæ‰€æœ‰ç­”æ¡ˆæ‹¿åˆ°æ‰‹ã€‚",
                "æˆ‘æœ‰å€‹æ¨¡ç³Šçš„ç•«é¢ï¼Œå¤§æ¦‚äº”ã€å…­å¹´å¾Œå§ï¼Œæˆ‘å¸Œæœ›è‡ªå·±èƒ½åœ¨è³‡è¨Šå·¥ç¨‹é ˜åŸŸæ‰¾åˆ°ä¸€å€‹ç«‹è¶³é»ã€‚å¯èƒ½æ˜¯å¯«ç¨‹å¼ã€ç ”ç©¶æ•¸æ“šï¼Œåˆæˆ–è€…æˆç‚ºå€å¡Šéˆå·¥ç¨‹å¸«ã€‚",
                "ã€äº”å¹´å¾Œçš„æˆ‘æœƒæ˜¯ä»€éº¼æ¨£å­ï¼Ÿã€é€™å€‹å•é¡Œåœ¨æˆ‘è…¦å­è£¡è½‰äº†å¥½å¹¾åœˆã€‚ã€æ˜¯æƒ³æˆç‚ºåƒé‚£ä½ç¾å…‰å‰è¼©ä¸€æ¨£çš„äººå—ï¼Ÿé‚„æ˜¯æƒ³èµ°è‡ªå·±çš„è·¯ï¼Ÿã€æˆ‘æŒºå€”å¼·çš„ï¼Œå¯èƒ½æœƒé¸å¾Œè€…ï¼Œä½†åˆæ€•è‡ªå·±å¤ªå¤©çœŸï¼Œæ’å¾—é ­ç ´è¡€æµã€‚",
                "èªªåˆ°æ’ç‰†ï¼Œæˆ‘ä¸æ€•å£“åŠ›é€¼æˆ‘ï¼Œå› ç‚ºæˆ‘çŸ¥é“è‡ªå·±è¢«é€¼æ€¥äº†åè€ŒæœƒğŸˆ¶å¥‡æ•ˆã€‚åƒæ˜¯æ±ºå®šè½‰ç³»é‚£å…©å€‹æœˆï¼Œæˆ–è€…æº–å‚™çµ±æ¸¬çš„é‚£æ®µæ™‚å…‰ã€‚å£“åŠ›å¤§åˆ°ç¡ä¸å¥½ï¼Œä½†æœ€å¾Œé‚„æ˜¯ç†å‡ºäº†é ­ç·’ã€‚æœªä¾†è¦æ˜¯ä¹Ÿé€™æ¨£ï¼Œæˆ‘æ‡‰è©²èƒ½æ‰›å¾—ä½å§ï¼Ÿä¸éæˆ‘ä¹Ÿåœ¨æƒ³ï¼Œã€æ‰›å¾—ä½è·Ÿéå¾—å¥½æ˜¯å…©å›äº‹ã€ï¼Œé€™é»å¾—å¥½å¥½ç¢ç£¨ã€‚",
                "é‚„æœ‰å®¶åº­ã€‚åª½åª½è·Ÿå§å§ç¾åœ¨éå¾—ä¸å®¹æ˜“ã€‚äº”å¹´å¾Œï¼Œæˆ‘å¸Œæœ›èƒ½è®“å¥¹å€‘ä¸ç”¨å†ç‚ºéŒ¢ç…©æƒ±ã€‚ä¸æ˜¯èªªè¦å¤§å¯Œå¤§è²´ï¼Œè€Œæ˜¯é‚£ç¨®ã€å¤ ç”¨å°±å¥½ã€å®‰å¿ƒå°±å¥½ã€çš„ç”Ÿæ´»ã€‚é€™ç›®æ¨™è½èµ·ä¾†å¾ˆæ™®é€šï¼Œä½†æˆ‘çŸ¥é“æœ‰å¤šé›£ã€‚",
                "èˆˆè¶£ä¹Ÿæœƒè·Ÿè‘—æˆ‘èµ°å§ã€‚åˆ†æä¸–ç•Œé€™ä»¶äº‹æˆ‘åœä¸ä¸‹ä¾†ã€‚é †ä¾¿ç¹¼çºŒç©éŸ³æ¨‚ï¼Œèªªä¸å®šé€™å¹¾å¹´å…§å°±æå‡ºä¸€é¦–è‡ªå·±æ»¿æ„çš„æ­Œï¼Œä¸Ÿåˆ°ç¶²è·¯ä¸Šï¼Œçœ‹çœ‹æœ‰æ²’æœ‰äººå–œæ­¡ã€‚",
                "æœ€è¿‘çœ‹çš„ã€æœ‰é™éŠæˆ²èˆ‡ç„¡é™éŠæˆ²ã€ï¼Œè£¡é¢èªªæœ‰é™éŠæˆ²æœ‰çµ‚é»ï¼Œç„¡é™éŠæˆ²è¿½æ±‚å»¶çºŒã€‚æˆ‘è¦ºå¾—æœªä¾†å°æˆ‘ä¾†èªªæ˜¯ç„¡é™éŠæˆ²ï¼Œæ²’æœ‰ä»€éº¼ã€åˆ°äº†å°±çµæŸã€çš„é»ã€‚æˆ‘å¾ˆå¥½å¥‡ï¼Œè‡ªå·±èƒ½æŠŠé€™å€‹éŠæˆ²ç©åˆ°ä»€éº¼ç¨‹åº¦ï¼Œèƒ½ä¸èƒ½ç©å‡ºé»åå ‚ã€‚",
                "ç¸½ä¹‹ï¼Œæœªä¾†æ˜¯å€‹å¤§å•è™Ÿï¼Œä½†æˆ‘å–œæ­¡é€™ç¨®ä¸ç¢ºå®šæ„Ÿã€‚å°±åƒè½ä¸€é¦–æ²’è½éçš„æ­Œï¼Œä¸‹ä¸€ç§’å¯èƒ½æ˜¯é¡±å…§é«˜æ½®ï¼Œä¹Ÿå¯èƒ½é‚„åœ¨é†é‡€çˆ†ç‚¸ï¼Œä½†æˆ‘å°±æ˜¯æƒ³æŒ‰ä¸‹æ’­æ”¾ã€‚å°æˆ‘ä¾†èªªï¼Œæ´»è‘—å°±æ˜¯é€™æ¨£ï¼Œé‚Šèµ°é‚Šçœ‹ï¼Œé‚Šæƒ³é‚Šåšã€‚"
            ]
        };
        const expressions = {
            intro: ["normal", "think", "happy", "happy", "happy", "think", "confused", "happy", "determined", "happy", "determined"],
            motivation: ["confused", "think", "confused", "happy", "determined", "happy"],
            future: ["normal", "think", "happy", "confused", "determined", "think", "happy", "determined", "happy"]
        };

        let currentChapter = "intro";
        let currentDialogue = 0;
        let index = 0;
        const dialogueText = document.getElementById("dialogueText");
        const continueBtn = document.getElementById("continueBtn");
        const replayBtn = document.getElementById("replayBtn");
        const nextChapterBtn = document.getElementById("nextChapterBtn");
        const backToTitleBtn = document.getElementById("backToTitleBtn");
        const dialogueBox = document.getElementById("dialogueBox");
        const character = document.getElementById("character");
        const title = document.getElementById("title");
        const typeSound = document.getElementById("typeSound");
        const dropProcessSound = document.getElementById("dropProcessSound");
        const dropSound = document.getElementById("dropSound");
        const buttonSound = document.getElementById("buttonSound");
        const bgm = document.getElementById("bgm");

        typeSound.volume = 0.75;

        document.body.addEventListener("click", startDialogue, { once: true });

        function createParticles() {
            const rect = title.getBoundingClientRect();
            const particleCount = 60;
            const smokeCount = 50;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement("div");
                particle.className = "particle";
                const size = Math.random() * 5 + 3;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${rect.left + rect.width / 2 - size / 2}px`;
                particle.style.top = `${rect.top + rect.height / 2}px`; // å¾æ¨™é¡Œä¸­å¿ƒæ•£é–‹
                particle.style.backgroundColor = i < particleCount * 0.4 ? "#808080" : (i < particleCount * 0.7 ? "#3d3d3d" : (i < particleCount * 0.9 ? "#5B5B00" : "#FFFFFF"));
                document.body.appendChild(particle);
                particle.style.animation = `scatter ${Math.random() * 0.5 + 1}s cubic-bezier(0.4, 0, 0.2, 1) forwards`;
                particle.style.transform = `translate(${Math.random() * 300 - 150}px, ${Math.random() * 200 - 100}px)`; // æ›´å¤§ç¯„åœ
                setTimeout(() => particle.remove(), 1500);
            }
            for (let i = 0; i < smokeCount; i++) {
                const smoke = document.createElement("div");
                smoke.className = "smoke";
                const size = Math.random() * 20 + 10;
                smoke.style.width = `${size}px`;
                smoke.style.height = `${size}px`;
                smoke.style.left = `${rect.left + rect.width / 2 - size / 2 + (Math.random() * 60 - 30)}px`;
                smoke.style.top = `${rect.top + rect.height / 2}px`; // å¾æ¨™é¡Œä¸­å¿ƒæ•£é–‹
                smoke.style.backgroundColor = i % 4 === 0 ? "#808080" : (i % 4 === 1 ? "#A9A9A9" : (i % 4 === 2 ? "#696969" : "#D3D3D3"));
                document.body.appendChild(smoke);
                smoke.style.animation = `smokeRise ${Math.random() * 1.5 + 1}s ease-out forwards`;
                setTimeout(() => smoke.remove(), 2500);
            }
        }

        function startDialogue() {
            dropProcessSound.play(); // é»æ“Šæ™‚æ’­æ”¾ä¸‹é™éŸ³æ•ˆ
            createParticles(); // è§¸ç™¼ç²’å­å’Œç…™éœ§ç‰¹æ•ˆ
            setTimeout(() => {
                title.style.display = "none"; // ç‰¹æ•ˆçµæŸå¾Œéš±è—æ¨™é¡Œ
                dialogueBox.style.display = "block";
                character.style.display = "block";
                bgm.play();
                typeDialogue();
            }, 1500); // ç­‰å¾…ç‰¹æ•ˆå®Œæˆ
        }

        function typeDialogue() {
            if (currentDialogue >= chapters[currentChapter].length) return;
            dialogueText.textContent = "";
            index = 0;
            continueBtn.style.display = "none";
            replayBtn.style.display = "none";
            nextChapterBtn.style.display = "none";
            backToTitleBtn.style.display = "none";
            typeNextChar();
        }

        function typeNextChar() {
            if (index < chapters[currentChapter][currentDialogue].length) {
                dialogueText.textContent += chapters[currentChapter][currentDialogue][index];
                typeSound.play();
                character.style.backgroundImage = Math.random() > 0.5 ? 
                    `url('${expressions[currentChapter][currentDialogue]}_say.png')` : 
                    `url('${expressions[currentChapter][currentDialogue]}.png')`;
                index++;
                setTimeout(typeNextChar, 33);
            } else {
                character.style.backgroundImage = `url('${expressions[currentChapter][currentDialogue]}.png')`;
                if (currentDialogue < chapters[currentChapter].length - 1) {
                    continueBtn.style.display = "inline-block";
                } else {
                    replayBtn.style.display = "inline-block";
                    if (currentChapter === "intro") nextChapterBtn.textContent = "è½‰ç³»å‹•æ©Ÿ";
                    else if (currentChapter === "motivation") nextChapterBtn.textContent = "æœªä¾†å±•æœ›";
                    else nextChapterBtn.textContent = "";
                    nextChapterBtn.style.display = currentChapter !== "future" ? "inline-block" : "none";
                    backToTitleBtn.style.display = currentChapter === "future" ? "inline-block" : "none";
                }
            }
        }

        function nextDialogue() {
            buttonSound.play();
            currentDialogue++;
            if (currentDialogue < chapters[currentChapter].length) {
                typeDialogue();
            }
        }

        function replayChapter() {
            buttonSound.play();
            currentDialogue = 0;
            typeDialogue();
        }

        function nextChapter() {
            buttonSound.play();
            if (currentChapter === "intro") {
                currentChapter = "motivation";
                currentDialogue = 0;
                typeDialogue();
            } else if (currentChapter === "motivation") {
                currentChapter = "future";
                currentDialogue = 0;
                typeDialogue();
            }
        }

        function backToTitle() {
            buttonSound.play();
            bgm.pause();
            bgm.currentTime = 0;
            currentChapter = "intro";
            currentDialogue = 0;
            dialogueBox.style.display = "none";
            character.style.display = "none";
            title.style.display = "block";
            document.body.addEventListener("click", startDialogue, { once: true });
        }
    </script>
</body>
</html>